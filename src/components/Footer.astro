---
/**
 * Footer.astro
 * Footer unificado para Barbería Premium
 */

import { site } from '../data/config.js';
import { barberia } from '../data/barberia.js';

const navLinks = site.navigation.main;
const social = barberia.business.social;
const baseYear = 2025;
const basePath = (import.meta.env.BASE_URL || '/').replace(/\/$/, '');

const withBase = (path: string) => {
  if (!path) return '';
  const normalized = path.startsWith('/') ? path : `/${path}`;
  return `${basePath}${normalized}`;
};

const resolveLink = (href: string) => {
  if (!href) return '#';
  const isSpecial = href.startsWith('#') || href.startsWith('mailto:') || href.startsWith('tel:');
  const isExternal = /^https?:\/\//.test(href);
  if (isSpecial || isExternal) {
    return href;
  }
  return withBase(href);
};
---

<footer class="relative overflow-hidden bg-neutral-950 text-neutral-200">
  <div class="absolute inset-0 bg-gradient-to-br from-yellow-500/5 via-transparent to-yellow-500/10 pointer-events-none"></div>
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative z-10">
    <div class="grid gap-12 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,0.8fr)]">
      <div class="space-y-6" data-aos="fade-up">
        <div class="flex items-center gap-4">
            <img
              src={withBase('/images/logo-barberia.svg')}
            alt="Barbería Premium"
            class="h-12 w-auto"
            width="180"
            height="48"
            loading="lazy"
            decoding="async"
          />
          <div>
            <p class="font-heading text-xl font-semibold text-white">Barbería Premium</p>
            <p class="text-sm text-neutral-400">Cortes modernos, tradición y estilo en Temuco.</p>
          </div>
        </div>
        <p class="max-w-xl text-sm text-neutral-300">
          {barberia.business.description}
        </p>
        <div class="flex flex-wrap items-center gap-3 text-sm text-neutral-300">
          <span class="inline-flex items-center gap-2 rounded-full border border-yellow-500/30 bg-yellow-500/10 px-4 py-2">
            <svg class="h-4 w-4 text-yellow-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 20.5c3.18-2.75 7-7.2 7-10.5A7 7 0 005 10c0 3.3 3.82 7.75 7 10.5z" />
              <circle cx="12" cy="10" r="3" />
            </svg>
            Av. Alemania 685, Temuco
          </span>
          <span class="inline-flex items-center gap-2 rounded-full border border-yellow-500/30 bg-yellow-500/10 px-4 py-2">
            <svg class="h-4 w-4 text-yellow-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 5h18M8 5v14m8-14v14M5 19h14" />
            </svg>
            Lunes a Sábado 10:00 - 20:00
          </span>
        </div>
      </div>

      <div class="grid gap-8 md:grid-cols-2" data-aos="fade-up" data-aos-delay="100">
        <div class="space-y-4">
          <h3 class="text-sm font-semibold uppercase tracking-widest text-neutral-400">Navegación</h3>
          <ul class="space-y-3 text-sm">
            {navLinks.map((item) => (
              <li>
                <a
                  href={resolveLink(item.href)}
                  class="inline-flex items-center gap-2 text-neutral-300 transition-colors duration-300 hover:text-yellow-400"
                >
                  <span class="h-px w-4 bg-yellow-500/40 transition-all duration-300 group-hover:w-8"></span>
                  {item.text}
                </a>
              </li>
            ))}
          </ul>
        </div>
        <div class="space-y-4">
          <h3 class="text-sm font-semibold uppercase tracking-widest text-neutral-400">Contáctanos</h3>
          <ul class="space-y-3 text-sm text-neutral-300">
            <li>
              <a href={`mailto:${barberia.business.email}`} class="inline-flex items-center gap-2 hover:text-yellow-400 transition-colors duration-300">
                <svg class="h-4 w-4 text-yellow-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 7l9 6 9-6" />
                  <rect x="3" y="5" width="18" height="14" rx="2" />
                </svg>
                {barberia.business.email}
              </a>
            </li>
            <li>
              <a href={`https://wa.me/${barberia.business.whatsapp}`} target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 hover:text-yellow-400 transition-colors duration-300">
                <svg class="h-4 w-4 text-yellow-400" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20.52 3.48A11.78 11.78 0 0012.066 0C5.637 0 .388 5.248.388 11.677a11.45 11.45 0 001.548 5.754L0 24l6.835-1.9a11.6 11.6 0 005.24 1.3h.005c6.43 0 11.677-5.248 11.677-11.677a11.58 11.58 0 00-3.237-8.243zM12.08 21.3h-.005a9.56 9.56 0 01-4.868-1.336l-.35-.208-4.053 1.127 1.082-3.95-.228-.405A9.5 9.5 0 012.46 11.68C2.46 6.315 6.725 2.05 12.09 2.05c2.528 0 4.908.985 6.7 2.777a9.42 9.42 0 012.783 6.685c0 5.364-4.265 9.739-9.483 9.739zm5.46-7.16c-.297-.148-1.759-.868-2.032-.967-.273-.099-.472-.148-.67.148-.198.297-.767.967-.94 1.165-.173.198-.347.223-.644.074-.297-.148-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.058-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.52.148-.173.198-.297.297-.495.099-.198.05-.371-.025-.52-.074-.148-.669-1.617-.916-2.217-.242-.58-.487-.502-.67-.512l-.57-.01c-.198 0-.52.074-.792.371-.272.297-1.041 1.017-1.041 2.479 0 1.462 1.066 2.875 1.214 3.073.148.198 2.099 3.207 5.086 4.492.711.307 1.265.49 1.697.628.713.227 1.363.195 1.877.118.572-.085 1.759-.718 2.006-1.412.248-.694.248-1.288.173-1.412-.074-.124-.272-.198-.57-.347z" />
                </svg>
                {barberia.business.phoneDisplay}
              </a>
            </li>
            <li class="inline-flex items-center gap-2">
              <svg class="h-4 w-4 text-yellow-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.949.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              Temuco, La Araucanía · Chile
            </li>
          </ul>
          <div class="flex gap-3 pt-4">
            <a
              href={social.instagram}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex h-10 w-10 items-center justify-center rounded-full border border-yellow-500/30 text-yellow-300 transition-all duration-300 hover:-translate-y-1 hover:bg-yellow-500/20 hover:text-yellow-100"
              aria-label="Instagram"
            >
              <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M7 2C4.243 2 2 4.243 2 7v10c0 2.757 2.243 5 5 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm10 2a3 3 0 013 3v10a3 3 0 01-3 3H7a3 3 0 01-3-3V7a3 3 0 013-3h10zm-5 3a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6zm5.5-.75a1.25 1.25 0 11-2.5 0 1.25 1.25 0 012.5 0z" />
              </svg>
            </a>
            <a
              href={social.facebook}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex h-10 w-10 items-center justify-center rounded-full border border-yellow-500/30 text-yellow-300 transition-all duration-300 hover:-translate-y-1 hover:bg-yellow-500/20 hover:text-yellow-100"
              aria-label="Facebook"
            >
              <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M22.675 0H1.325C.593 0 0 .593 0 1.326v21.348C0 23.407.593 24 1.325 24h11.488v-9.294H9.691V11.01h3.122V8.413c0-3.1 1.893-4.788 4.66-4.788 1.325 0 2.464.099 2.796.143v3.24l-1.918.001c-1.504 0-1.796.715-1.796 1.764v2.317h3.587l-.467 3.696h-3.12V24h6.117C23.407 24 24 23.407 24 22.674V1.326C24 .593 23.407 0 22.675 0" />
              </svg>
            </a>
            <a
              href={`https://wa.me/${barberia.business.whatsapp}`}
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex h-10 w-10 items-center justify-center rounded-full border border-yellow-500/30 text-yellow-300 transition-all duration-300 hover:-translate-y-1 hover:bg-yellow-500/20 hover:text-yellow-100"
              aria-label="WhatsApp"
            >
              <svg class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M20.52 3.48A11.78 11.78 0 0012.066 0C5.637 0 .388 5.248.388 11.677a11.45 11.45 0 001.548 5.754L0 24l6.835-1.9a11.6 11.6 0 005.24 1.3h.005c6.43 0 11.677-5.248 11.677-11.677a11.58 11.58 0 00-3.237-8.243z" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-12 border-t border-neutral-800/80 pt-8 text-center text-sm text-neutral-400" data-aos="fade-up" data-aos-delay="150">
      © {baseYear} Barbería Premium | Temuco | {barberia.business.email}
    </div>
  </div>
</footer>
